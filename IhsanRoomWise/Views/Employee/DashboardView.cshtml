@inject IHttpContextAccessor HttpContextAccessor

@{
    ViewData["Title"] = "Employee Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="page-header">
    <h1 class="page-title">Welcome Back, @HttpContextAccessor.HttpContext.Session.GetString("UserFullName")!</h1>
    <p class="page-description">Your complete booking overview & room availability</p>
</div>

<!-- Quick Actions Bar -->
<div class="row g-3 mb-4">
    <div class="col-auto">
        <a asp-action="CreateBookingView" class="btn btn-primary">
            <i class="fas fa-plus-circle"></i> New Booking
        </a>
    </div>
    <div class="col-auto">
        <a asp-action="MyBookingsView" class="btn btn-success">
            <i class="fas fa-calendar-check"></i> My Bookings
        </a>
    </div>
    <div class="col-auto">
        <a asp-action="AvailableRoomsView" class="btn btn-info">
            <i class="fas fa-door-open"></i> Find Rooms
        </a>
    </div>
    <div class="col-auto ms-auto">
        <button class="btn btn-sm btn-primary" onclick="refreshDashboard()">
            <i class="fas fa-sync-alt"></i> Refresh
        </button>
    </div>
</div>

<!-- Personal Statistics Cards -->
<div class="row g-4 mb-4">
    <div class="col-md-3">
        <div class="stat-card">
            <div class="stat-icon bg-primary">
                <i class="fas fa-calendar-day"></i>
            </div>
            <div class="stat-details">
                <h3 class="stat-value">@ViewBag.MyBookingsToday</h3>
                <p class="stat-label">Bookings Today</p>
                <small class="text-muted">Your schedule</small>
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="stat-card">
            <div class="stat-icon bg-success">
                <i class="fas fa-clock"></i>
            </div>
            <div class="stat-details">
                <h3 class="stat-value">@ViewBag.MyUpcomingBookings</h3>
                <p class="stat-label">Upcoming</p>
                <small class="text-muted">@ViewBag.MyPendingBookings pending</small>
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="stat-card">
            <div class="stat-icon bg-info">
                <i class="fas fa-history"></i>
            </div>
            <div class="stat-details">
                <h3 class="stat-value">@ViewBag.MyPastBookings</h3>
                <p class="stat-label">Past Bookings</p>
                <small class="text-muted">Completed sessions</small>
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="stat-card">
            <div class="stat-icon bg-warning">
                <i class="fas fa-star"></i>
            </div>
            <div class="stat-details">
                <h3 class="stat-value">@ViewBag.MyFeedbacksGiven</h3>
                <p class="stat-label">Feedback Given</p>
                <small class="text-muted">Room reviews</small>
            </div>
        </div>
    </div>
</div>

<!-- Available Rooms Now -->
<div class="card mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="card-title mb-0">
            <i class="fas fa-door-open text-success me-2"></i>
            Available Rooms Now (@ViewBag.AvailableRoomsNow)
        </h5>
        <div class="filter-group d-flex justify-content-end align-items-center gap-3">
            <div class="d-flex flex-column">
                <small class="text-muted">Plant</small>
                <select id="plantFilter" class="filter-select">
                    <option value="">All Plants</option>
                </select>
            </div>

            <div class="d-flex flex-column">
                <small class="text-muted">Block</small>
                <select id="blockFilter" class="filter-select" disabled>
                    <option value="">All Blocks</option>
                </select>
            </div>

            <div class="d-flex flex-column">
                <small class="text-muted">Floor</small>
                <select id="floorFilter" class="filter-select" disabled>
                    <option value="">All Floors</option>
                </select>
            </div>
        </div>
        <a href="@Url.Action("AvailableRoomsView")" class="btn btn-sm btn-outline-success ms-4">View All</a>
    </div>
    <div class="card-body">
        <div class="row g-3" id="availableRoomsContainer">
            @if (ViewBag.AvailableRoomsNowList != null && ViewBag.AvailableRoomsNowList.Count > 0)
            {
                @foreach (var room in ViewBag.AvailableRoomsNowList)
                {
                    <div class="col-md-6 col-lg-4 room-card-item" 
                         data-plant="@room.location_plant_name"
                         data-block="@room.location_block"
                         data-floor="@room.location_floor">
                        <div class="card border-start border-4 border-success h-100 shadow-sm hover-lift">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <div>
                                        <h6 class="mb-1 fw-bold">@room.room_name</h6>
                                        <small class="text-muted">@room.room_code</small>
                                    </div>
                                    <span class="badge bg-success">
                                        <i class="fas fa-check-circle me-1"></i>Available
                                    </span>
                                </div>
                                
                                <div class="mb-3">
                                    <div class="d-flex flex-column align-items-start">
                                        <div class="mb-1">
                                            <i class="fas fa-map-marker-alt text-muted me-1"></i>
                                            <small>@room.location_plant_name - Block @room.location_block, Floor @room.location_floor</small>
                                        </div>
                                        <div>
                                            <i class="fas fa-users text-muted me-1"></i>
                                            <strong>@room.room_capacity people</strong>
                                        </div>
                                    </div>
                                </div>
                                
                                @if (!string.IsNullOrEmpty(room.room_facilities))
                                {
                                    <div class="mb-3" style="min-height: 125px;">
                                        <small class="text-muted mb-1 d-block">Facilities:</small>
                                        <div class="badge-container">
                                            @{
                                                var facilities = room.room_facilities.Split(',');
                                            }
                                            @foreach (var facility in facilities)
                                            {
                                                <span class="badge bg-light text-dark me-1 mb-1">@facility.Trim()</span>
                                            }
                                        </div>
                                    </div>
                                }
                                
                                @if (!string.IsNullOrEmpty(room.next_booking_time))
                                {
                                    <div class="border-start border-info border-2 ps-3 py-2">
                                        <div class="d-flex align-items-center text-info">
                                            <i class="fas fa-clock me-2"></i>
                                            <strong>Next booking: @room.next_booking_time</strong>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="col-12">
                    <div class="text-center py-5">
                        <i class="fas fa-door-closed fa-3x text-muted mb-3"></i>
                        <p class="text-muted mb-0">No rooms available right now</p>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

<!-- My Upcoming Bookings -->
<div class="card mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="card-title mb-0">
            <i class="fas fa-calendar-week text-primary me-2"></i>
            My Upcoming Bookings (@ViewBag.MyUpcomingBookings)
        </h5>
        <a href="@Url.Action("MyBookingsView")" class="btn btn-sm btn-outline-success">View All</a>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover text-center text-nowrap" id="upcomingBookingsTable">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Room</th>
                        <th>Title</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    @if (ViewBag.UpcomingBookings != null && ViewBag.UpcomingBookings.Count > 0)
                    {
                        @foreach (var booking in ViewBag.UpcomingBookings)
                        {
                            <tr>
                                <td>
                                    <strong>@booking.booking_date.ToString("MMM dd")</strong>
                                    <br><small class="text-muted">@booking.booking_date.ToString("ddd")</small>
                                </td>
                                <td>
                                    <strong>@booking.booking_start_time - @booking.booking_end_time</strong>
                                </td>
                                <td>
                                    <strong>@booking.room_name</strong>
                                </td>
                                <td>@booking.booking_title</td>
                                <td>
                                    @if (booking.booking_status == "Pending")
                                    {
                                        <span class="badge bg-warning">Pending</span>
                                    }
                                    else if (booking.booking_status == "Confirmed")
                                    {
                                        <span class="badge bg-success">Confirmed</span>
                                    }
                                </td>
                            </tr>
                        }
                    }
                    
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Weekly Schedule -->
<div class="card mb-4">
    <div class="card-header">
        <h5 class="card-title mb-0">
            <i class="fas fa-calendar-alt me-2"></i>
            This Week Schedule
        </h5>
    </div>
    <div class="card-body">
        <div class="row g-4">
            @if (ViewBag.WeeklySchedule != null)
            {
                var daysDict = new Dictionary<string, List<dynamic>>();
                foreach (var day in ViewBag.WeeklySchedule)
                {
                    var dayKey = $"{day.day_name} {day.date_str}";
                    if (!daysDict.ContainsKey(dayKey))
                        daysDict[dayKey] = new List<dynamic>();
                    daysDict[dayKey].Add(day);
                }
                
                @foreach (var dayGroup in daysDict)
                {
                    var firstDay = dayGroup.Value.First();
                    var isToday = firstDay.is_today;
                    var dayClass = isToday ? "border-primary border-3 bg-primary bg-opacity-10 shadow-lg" : "shadow-sm";
                    var bookings = dayGroup.Value.Where(d => d.booking_id != null).ToList();
                    var bookingCount = bookings.Count;
                    
                    <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6 col-12">
                        <div class="card text-center h-100 @dayClass position-relative overflow-hidden schedule-day-card">
                            @if (isToday)
                            {
                                <span class="badge bg-primary position-absolute top-0 end-0 border border-white border-2 m-2 shadow">TODAY</span>
                            }
                            
                            <div class="card-body py-4 d-flex flex-column">
                                <div class="mb-4">
                                    <h5 class="fw-bold mb-1 text-truncate">@firstDay.day_name</h5>
                                    <div class="date-badge bg-light rounded-pill px-3 py-1 mx-auto d-inline-block">
                                        <small class="text-muted fw-medium">@firstDay.date_str</small>
                                    </div>
                                </div>

                                @if (bookingCount > 0)
                                {
                                    <div class="flex-grow-1 d-flex flex-column justify-content-center">
                                        @if (bookingCount == 1)
                                        {
                                            var booking = bookings.First();
                                            <div class="single-booking bg-gradient rounded-3 p-4 shadow-sm border border-light">
                                                <div class="time-circle mb-3 mx-auto">
                                                    <div class="time-circle-inner">
                                                        <span class="fw-bold fs-6">@booking.start_time</span><br>
                                                        <small class="text-muted">to</small><br>
                                                        <span class="fw-bold fs-6">@booking.end_time</span>
                                                    </div>
                                                </div>
                                                
                                                <div class="room-info mb-3">
                                                    <div class="room-icon mb-2">
                                                        <i class="fas fa-door-open fa-2x text-primary"></i>
                                                    </div>
                                                    <h6 class="fw-semibold mb-1">@booking.room_name</h6>
                                                    <div class="room-code bg-primary bg-opacity-10 text-primary px-2 py-1 rounded-pill small">
                                                        @booking.room_code
                                                    </div>
                                                </div>
                                                
                                                <span class="badge badge-status badge-@(booking.booking_status == "Pending" ? "warning" : "success") text-@(booking.booking_status == "Pending" ? "warning" : "success") fs-6 px-3 py-2">
                                                    <i class="fas fa-@(booking.booking_status == "Pending" ? "clock" : "check-circle") me-1"></i>
                                                    @booking.booking_status
                                                </span>
                                            </div>
                                        }
                                        else if (bookingCount <= 3)
                                        {
                                            <div class="multi-booking-list">
                                                @foreach (var booking in bookings)
                                                {
                                                    <div class="booking-compact mb-2 p-3 rounded-2 shadow-sm border-start border-3 border-@(booking.booking_status == "Pending" ? "warning" : "success")">
                                                        <div class="d-flex align-items-center justify-content-between">
                                                            <div class="flex-grow-1 me-2">
                                                                <small class="text-muted d-block">@booking.start_time - @booking.end_time</small>
                                                                <strong class="room-compact">@booking.room_name</strong>
                                                            </div>
                                                            <span class="badge badge-@(booking.booking_status == "Pending" ? "warning" : "success") small px-2">
                                                                @booking.booking_status[0]
                                                            </span>
                                                        </div>
                                                    </div>
                                                }
                                            </div>
                                        }
                                        else
                                        {
                                            <div class="booking-summary p-4 bg-light rounded-3 shadow-sm text-center">
                                                <h6 class="fw-bold mb-3 text-primary">@bookingCount Meetings</h6>
                                                
                                                <div class="preview-list small">
                                                    @foreach (var booking in bookings.Take(3))
                                                    {
                                                        <div class="preview-item py-1 border-bottom border-light">
                                                            <div>
                                                                <i class="fas fa-calendar-day text-muted me-2 small"></i>
                                                                <span>@booking.start_time • </span>
                                                            </div>
                                                            <span class="mb-2">@booking.room_name</span>
                                                        </div>
                                                    }
                                                    @if (bookingCount > 3)
                                                    {
                                                        <div class="preview-item py-1 text-muted fst-italic">
                                                            <i class="fas fa-plus-circle me-2"></i>
                                                            +@(bookingCount - 3) more
                                                        </div>
                                                    }
                                                </div>
                                            </div>
                                        }
                                    </div>
                                }
                                else
                                {
                                    <div class="free-day flex-grow-1 d-flex flex-column justify-content-center">
                                        <div class="free-icon mb-3 mx-auto">
                                            <i class="fas fa-check-double fa-3x text-success mb-3"></i>
                                        </div>
                                        <h5 class="text-success fw-bold mb-2">Free All Day</h5>
                                        <div class="bg-success bg-opacity-10 text-success px-3 py-2 rounded-pill mx-auto">
                                            <small><i class="fas fa-door-open me-1"></i>Book now</small>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                }
            }
        </div>
    </div>
</div>

<!-- Booking Trends & Status Charts -->
<div class="row g-4 mb-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">My Booking Trends (30 days)</h5>
            </div>
            <div class="card-body">
                <div id="myBookingTrendsChart" style="height: 250px;"></div>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Bookings by Status (30 days)</h5>
            </div>
            <div class="card-body">
                <div id="bookingsStatusChart" style="height: 250px;"></div>
            </div>
        </div>
    </div>
</div>

<!-- Popular Rooms & Recent Activity -->
<div class="row g-4 mb-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Popular Rooms (30 days)</h5>
            </div>
            <div class="card-body">
                @if (ViewBag.PopularRooms != null && ViewBag.PopularRooms.Count > 0)
                {
                    <div class="list-group list-group-flush">
                        @foreach (var room in ViewBag.PopularRooms)
                        {
                            <div class="list-group-item d-flex justify-content-between align-items-center">
                                <div>
                                    <strong>@room.room_name</strong>
                                    <br><small class="text-muted">@room.room_code</small>
                                </div>
                                <span class="badge bg-primary rounded-pill">@room.booking_count bookings</span>
                            </div>
                        }
                    </div>
                }
                else
                {
                    <p class="text-muted mb-0">No data available</p>
                }
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fas fa-history me-2"></i>
                    Recent Activity
                </h5>
            </div>
            <div class="card-body">
                @if (ViewBag.RecentActivity != null && ViewBag.RecentActivity.Count > 0)
                {
                    <div class="activity-list">
                        @foreach (var activity in ((IEnumerable<dynamic>)ViewBag.RecentActivity).Take(5))
                        {
                            <div class="activity-item d-flex align-items-start py-2 border-bottom">
                                <div class="flex-shrink-0 me-3">
                                    <i class="fas fa-circle text-muted" style="font-size: 8px; margin-top: 6px;"></i>
                                </div>
                                <div class="flex-grow-1">
                                    <div class="d-flex justify-content-between">
                                        <strong>@activity.log_action</strong>
                                        <small class="text-muted">@activity.log_created_at.ToString("HH:mm dd/MM")</small>
                                    </div>
                                    @if (!string.IsNullOrEmpty(activity.log_description))
                                    {
                                        <small class="text-muted d-block">@activity.log_description</small>
                                    }
                                </div>
                            </div>
                        }
                    </div>
                }
                else
                {
                    <div class="text-center py-4">
                        <i class="fas fa-clock fa-2x text-muted mb-2"></i>
                        <p class="text-muted mb-0">No recent activity</p>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Chart data from ViewBag
        const statusData = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.MyBookingsByStatus ?? new {}));
        const trendsData = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.MyBookingTrends ?? new {}));

        $(document).ready(function () {
            // Initialize room filters
            initializeRoomFilters();
            
            // Initialize DataTable
            initializeDataTable();
            
            // Initialize charts
            initializeCharts();
            
            // Hover effects
            $('.hover-lift').hover(
                function() { $(this).addClass('shadow-lg transform-scale'); },
                function() { $(this).removeClass('shadow-lg transform-scale'); }
            );
        });

        // Room Filter System (Matching Admin Dashboard)
        function initializeRoomFilters() {
            const rooms = $('.room-card-item');
            
            // Helper function to populate select options
            function populateSelect($select, values) {
                $select.find('option:not(:first)').remove();
                const uniqueValues = [...new Set(values)].sort();
                uniqueValues.forEach(v => {
                    $select.append(`<option value="${v}">${v}</option>`);
                });
            }

            // Get all plants
            const plants = rooms.map((_, el) => $(el).data('plant')).get();
            populateSelect($('#plantFilter'), plants);

            // Plant filter change handler
            $('#plantFilter').on('change', function () {
                const plant = $(this).val();
                
                if (!plant) {
                    rooms.show();
                    $('#blockFilter').val('').prop('disabled', true).find('option:not(:first)').remove();
                    $('#floorFilter').val('').prop('disabled', true).find('option:not(:first)').remove();
                    return;
                }

                // Get blocks for selected plant
                const blocks = rooms
                    .filter(`[data-plant="${plant}"]`)
                    .map((_, el) => $(el).data('block'))
                    .get();

                populateSelect($('#blockFilter'), blocks);
                $('#blockFilter').prop('disabled', false);
                $('#floorFilter').val('').prop('disabled', true).find('option:not(:first)').remove();
                
                // Show only rooms from selected plant
                rooms.hide().filter(`[data-plant="${plant}"]`).show();
            });

            // Set random default plant
            if (plants.length) {
                const randomPlant = plants[Math.floor(Math.random() * plants.length)];
                $('#plantFilter').val(randomPlant).trigger('change');
            }

            // Block filter change handler
            $('#blockFilter').on('change', function () {
                const plant = $('#plantFilter').val();
                const block = $(this).val();

                if (!block) {
                    rooms.hide().filter(`[data-plant="${plant}"]`).show();
                    $('#floorFilter').val('').prop('disabled', true).find('option:not(:first)').remove();
                    return;
                }

                // Get floors for selected plant and block
                const floors = rooms
                    .filter(`[data-plant="${plant}"][data-block="${block}"]`)
                    .map((_, el) => $(el).data('floor'))
                    .get();

                populateSelect($('#floorFilter'), floors);
                $('#floorFilter').prop('disabled', false);

                // Show only rooms from selected plant and block
                rooms.hide().filter(`[data-plant="${plant}"][data-block="${block}"]`).show();
            });

            // Floor filter change handler
            $('#floorFilter').on('change', function () {
                const plant = $('#plantFilter').val();
                const block = $('#blockFilter').val();
                const floor = $(this).val();

                if (!floor) {
                    rooms.hide().filter(`[data-plant="${plant}"][data-block="${block}"]`).show();
                    return;
                }

                // Show only rooms from selected plant, block, and floor
                rooms.hide().filter(`[data-plant="${plant}"][data-block="${block}"][data-floor="${floor}"]`).show();
            });
        }

        // DataTable Initialization
        function initializeDataTable() {
            if ($.fn.DataTable.isDataTable('#upcomingBookingsTable')) {
                $('#upcomingBookingsTable').DataTable().destroy();
            }
            
            $('#upcomingBookingsTable').DataTable({
                responsive: false,
                scrollX: true,
                pageLength: 25,
                language: {
                    search: "",
                    searchPlaceholder: "🔍 Search bookings...",
                    lengthMenu: "Show _MENU_ bookings",
                    info: "Showing _START_ to _END_ of _TOTAL_ bookings",
                    emptyTable: `
                        <div class="text-center py-4 text-muted">
                            <i class="fas fa-calendar-times fa-2x mb-2"></i>
                            <p class="mb-0">No upcoming bookings found</p>
                        </div>
                    `,
                    zeroRecords : `
                        <div class="text-center py-4 text-muted">
                            <i class="fas fa-search fa-2x mb-2"></i>
                            <p class="mb-0">No upcoming bookings found</p>
                        </div>
                    `,
                    paginate: {
                        previous: "«",
                        next: "»"
                    }
                },
                dom:
                    "<'row mb-2'<'col-md-6'l><'col-md-6 text-end'f>>" +
                    "<'row'<'col-12'tr>>" +
                    "<'row mt-2'<'col-md-6'i><'col-md-6 text-end'p>>"
            });
        }

        // Charts Initialization
        function initializeCharts() {
            // Booking Trends Chart
            if (trendsData.length > 0) {
                Highcharts.chart('myBookingTrendsChart', {
                    chart: { 
                        type: 'line', 
                        height: 250 
                    },
                    title: { text: null },
                    xAxis: { 
                        categories: trendsData.map(d => d.date_str), 
                        crosshair: true 
                    },
                    yAxis: { 
                        title: { text: 'Bookings' }, 
                        allowDecimals: false, 
                        min: 0 
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size: 10px">{point.key}</span><br>',
                        pointFormat: '<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b>'
                    },
                    series: [{ 
                        name: 'My Bookings', 
                        data: trendsData.map(d => d.count), 
                        color: '#0d6efd', 
                        marker: { radius: 4 } 
                    }],
                    legend: { enabled: false },
                    credits: { enabled: false }
                });
            }

            // Bookings by Status Chart
            if (Object.keys(statusData).length > 0) {
                const pieData = Object.keys(statusData).map(key => ({
                    name: key,
                    y: statusData[key],
                    color: key === 'Confirmed' ? '#28a745' : 
                           key === 'Pending' ? '#ffc107' : 
                           key === 'Completed' ? '#17a2b8' : '#6c757d'
                }));

                Highcharts.chart('bookingsStatusChart', {
                    chart: { 
                        type: 'pie', 
                        height: 250 
                    },
                    title: { text: null },
                    tooltip: { 
                        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>' 
                    },
                    plotOptions: {
                        pie: {
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: { 
                                enabled: true, 
                                format: '<b>{point.name}</b>: {point.percentage:.1f}%' 
                            }
                        }
                    },
                    series: [{ 
                        name: 'Bookings', 
                        colorByPoint: true, 
                        data: pieData 
                    }],
                    credits: { enabled: false }
                });
            }
        }

        // Refresh Dashboard
        function refreshDashboard() {
            Swal.fire({
                title: 'Refreshing...',
                allowOutsideClick: false,
                showConfirmButton: false,
                willOpen: () => { Swal.showLoading(); }
            });
            location.reload();
        }
    </script>
}

@section Styles {
    <style>
        /* Schedule Day Cards */
        .schedule-day-card {
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .schedule-day-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1) !important;
        }

        /* Time Circle */
        .time-circle {
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #0dd25c 0%, #009d27 100%);
            border-radius: 50%;
            box-shadow: 0 4px 15px rgba(6, 99, 3, 0.4);
        }

        .time-circle-inner {
            width: 110px;
            height: 110px;
            background: white;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            line-height: 1.2;
        }

        /* Room Info */
        .room-info {
            padding: 1rem 0;
        }

        .room-icon {
            filter: drop-shadow(0 4px 8px rgba(13, 110, 253, 0.3));
        }

        .room-code {
            display: inline-block;
            font-size: 0.75rem;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(13, 110, 253, 0.2);
        }

        /* Badge Status */
        .badge-status {
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            font-weight: 600;
            min-width: 90px;
        }

        /* Compact Booking Cards */
        .booking-compact {
            background: white;
            transition: all 0.2s ease;
        }

        .booking-compact:hover {
            background-color: rgba(13, 110, 253, 0.05) !important;
            transform: scale(1.02);
        }

        .room-compact {
            font-size: 0.9rem;
            color: #495057;
        }

        /* Booking Summary */
        .booking-summary {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .preview-list .preview-item {
            text-align: left;
        }

        .preview-list .preview-item:last-child {
            border-bottom: none !important;
        }

        /* Free Day */
        .free-day {
            padding: 1rem 0;
        }

        .free-icon {
            filter: drop-shadow(0 4px 8px rgba(40, 167, 69, 0.3));
        }

        /* Date Badge */
        .date-badge {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        /* Hover Lift Effect */
        .hover-lift {
            transition: all 0.3s ease;
        }

        .hover-lift.shadow-lg {
            box-shadow: 0 1rem 3rem rgba(0,0,0,0.175) !important;
        }

        .hover-lift.transform-scale {
            transform: translateY(-5px);
        }

        /* Activity List */
        .activity-item {
            transition: background-color 0.2s ease;
        }

        .activity-item:hover {
            background-color: rgba(0, 0, 0, 0.02);
        }

        .activity-item:last-child {
            border-bottom: none !important;
        }

        /* Responsive Adjustments */
        @@media (max-width: 768px) {

            .schedule-day-card {
                margin-bottom: 1rem;
            }
        }
    </style>
}