@model List<dynamic>

@{
    ViewData["Title"] = "Bookings Management";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="page-header">
    <div>
        <h1 class="page-title">Bookings Management</h1>
        <p class="page-description">Manage all meeting room bookings</p>
    </div>
    <div class="page-actions">
        <div class="view-toggle">
            <button class="view-btn active" data-view="table">
                <i class="fas fa-table"></i>
            </button>
            <button class="view-btn" data-view="calendar">
                <i class="fas fa-calendar-alt"></i>
            </button>
        </div>
        <a asp-action="ExportBookings" class="btn btn-success">
            <i class="fas fa-file-excel me-2"></i> Export
        </a>
    </div>
</div>

<!-- Quick Stats -->
<div class="row g-3 mb-4">
    <div class="col-md-3">
        <div class="stat-card stat-card-sm">
            <div class="stat-icon-sm bg-primary">
                <i class="fas fa-calendar-check"></i>
            </div>
            <div class="stat-details-sm">
                <div class="stat-value-sm">@Model.Count</div>
                <div class="stat-label-sm">Total Bookings</div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-card stat-card-sm">
            <div class="stat-icon-sm bg-warning">
                <i class="fas fa-clock"></i>
            </div>
            <div class="stat-details-sm">
                <div class="stat-value-sm">@Model.Count(b => b.booking_status == "Pending")</div>
                <div class="stat-label-sm">Pending</div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-card stat-card-sm">
            <div class="stat-icon-sm bg-success">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-details-sm">
                <div class="stat-value-sm">@Model.Count(b => b.booking_status == "Confirmed")</div>
                <div class="stat-label-sm">Confirmed</div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stat-card stat-card-sm">
            <div class="stat-icon-sm bg-info">
                <i class="fas fa-spinner"></i>
            </div>
            <div class="stat-details-sm">
                <div class="stat-value-sm">@Model.Count(b => b.booking_status == "InProgress")</div>
                <div class="stat-label-sm">In Progress</div>
            </div>
        </div>
    </div>
</div>

<!-- Filter Section -->
<div class="filter-section d-flex justify-content-center align-items-center">
    <div class="filter-group d-flex justify-content-start align-items-center gap-3">
        <div class="d-flex flex-column">
            <label>Status</label>
            <select class="filter-select" id="filterStatus" style="min-width:200px !important;">
                <option value="">All Status</option>
                <option value="Pending">Pending</option>
                <option value="Confirmed">Confirmed</option>
                <option value="InProgress">In Progress</option>
                <option value="Completed">Completed</option>
                <option value="Cancelled">Cancelled</option>
            </select>
        </div>
        <div class="d-flex flex-column">
            <label>Date Range</label>
            <select class="filter-select" id="filterDateRange" style="min-width:200px !important;">
                <option value="">All Dates</option>
                <option value="today">Today</option>
                <option value="tomorrow">Tomorrow</option>
                <option value="week">This Week</option>
                <option value="month">This Month</option>
            </select>
        </div>
        <div class="d-flex flex-column">
            <label>Room</label>
            <select class="filter-select" id="filterRoom" style="min-width:200px !important;">
                <option value="">All Rooms</option>
                @foreach (var booking in Model.GroupBy(b => b.room_code).Select(g => g.First()))
                {
                    <option value="@booking.room_code">@booking.room_code - @booking.room_name</option>
                }
            </select>
        </div>
    </div>
    
    <div class="filter-actions">
        <button class="btn-primary" onclick="resetFilters()">
            <i class="fas fa-undo"></i> Reset
        </button>
    </div>
</div>

<!-- Table View -->
<div class="card" id="tableView">
    <div class="card-body">
        <div class="table-responsive">
            <table id="bookingsTable" class="table table-hover text-nowrap text-center align-middle">
                <thead>
                    <tr>
                        <th><div class="th-content"><i class="fas fa-barcode me-2"></i>Code</div></th>
                        <th><div class="th-content"><i class="fas fa-heading me-2"></i>Title</div></th>
                        <th><div class="th-content"><i class="fas fa-door-open me-2"></i>Room</div></th>
                        <th><div class="th-content"><i class="fas fa-user me-2"></i>User</div></th>
                        <th><div class="th-content"><i class="fas fa-calendar me-2"></i>Date</div></th>
                        <th><div class="th-content"><i class="fas fa-clock me-2"></i>Time</div></th>
                        <th><div class="th-content"><i class="fas fa-circle-dot me-2"></i>Status</div></th>
                        <th class="text-center"><div class="th-content justify-content-center"><i class="fas fa-tools me-2"></i>Actions</div></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var booking in Model)
                    {
                        <tr data-status="@booking.booking_status" data-date="@booking.booking_date.ToString("yyyy-MM-dd")" data-room="@booking.room_code">
                            <td><span class="booking-code">@booking.booking_code</span></td>
                            <td>
                                <div class="booking-title-cell">
                                    <span class="fw-semibold">@booking.booking_title</span>
                                </div>
                            </td>
                            <td>
                                <div class="room-info">
                                    <div class="room-name">@booking.room_code</div>
                                    <div class="room-detail">@booking.room_name</div>
                                </div>
                            </td>
                            <td>
                                <div class="user-info">
                                    <div class="user-name">@booking.user_full_name</div>
                                    <div class="user-detail">@booking.user_employee_id</div>
                                </div>
                            </td>
                            <td>@booking.booking_date.ToString("MMM dd, yyyy")</td>
                            <td>
                                <span class="time-range">
                                    @booking.booking_start_time.ToString(@"hh\:mm") - @booking.booking_end_time.ToString(@"hh\:mm")
                                </span>
                            </td>
                            <td>
                                @if (booking.booking_status == "Pending")
                                {
                                    <span class="status-badge status-pending">
                                        <i class="fas fa-circle"></i> Pending
                                    </span>
                                }
                                else if (booking.booking_status == "Confirmed")
                                {
                                    <span class="status-badge status-confirmed">
                                        <i class="fas fa-circle"></i> Confirmed
                                    </span>
                                }
                                else if (booking.booking_status == "InProgress")
                                {
                                    <span class="status-badge status-progress">
                                        <i class="fas fa-circle"></i> In Progress
                                    </span>
                                }
                                else if (booking.booking_status == "Completed")
                                {
                                    <span class="status-badge status-completed">
                                        <i class="fas fa-circle"></i> Completed
                                    </span>
                                }
                                else if (booking.booking_status == "Cancelled")
                                {
                                    <span class="status-badge status-cancelled">
                                        <i class="fas fa-circle"></i> Cancelled
                                    </span>
                                }
                            </td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn-action btn-action-view" 
                                            onclick='viewBooking(@booking.booking_id, "@booking.booking_code", "@booking.booking_title", "@booking.booking_description", "@booking.booking_date.ToString("yyyy-MM-dd")", "@booking.booking_start_time.ToString(@"hh\:mm")", "@booking.booking_end_time.ToString(@"hh\:mm")", "@booking.room_name", "@booking.user_full_name")'
                                            title="View Details">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    @if (booking.booking_status == "Pending")
                                    {
                                        <button class="btn-action btn-action-approve" 
                                                onclick="approveBooking(@booking.booking_id)"
                                                title="Approve">
                                            <i class="fas fa-check"></i>
                                        </button>
                                    }
                                    @if (booking.booking_status == "Pending" || booking.booking_status == "Confirmed")
                                    {
                                        <button class="btn-action btn-action-cancel" 
                                                onclick="cancelBooking(@booking.booking_id)"
                                                title="Cancel">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    }
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Calendar View -->
<div class="card" id="calendarView" style="display: none;">
    <div class="card-body">
        <div id="calendar"></div>
    </div>
</div>

@section Modals {
<!-- View Booking Modal -->
<div class="modal fade" id="viewBookingModal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-header-content">
                    <div class="modal-icon bg-info">
                        <i class="fas fa-eye"></i>
                    </div>
                    <div>
                        <h5 class="modal-title">Booking Details</h5>
                        <p class="modal-subtitle">View booking information</p>
                    </div>
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="detail-group">
                            <label>Booking Code</label>
                            <p id="viewCode"></p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="detail-group">
                            <label>Title</label>
                            <p id="viewTitle"></p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="detail-group">
                            <label>Room</label>
                            <p id="viewRoom"></p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="detail-group">
                            <label>User</label>
                            <p id="viewUser"></p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="detail-group">
                            <label>Date</label>
                            <p id="viewDate"></p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="detail-group">
                            <label>Time</label>
                            <p id="viewTime"></p>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="detail-group">
                            <label>Description</label>
                            <p id="viewDescription"></p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-2"></i>Close
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Cancel Booking Modal -->
<div class="modal fade" id="cancelBookingModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-header-content">
                    <div class="modal-icon bg-danger">
                        <i class="fas fa-times"></i>
                    </div>
                    <div>
                        <h5 class="modal-title">Cancel Booking</h5>
                        <p class="modal-subtitle">Provide cancellation reason</p>
                    </div>
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="cancelBookingId" />
                <div class="mb-3">
                    <label class="form-label">Cancellation Reason <span class="text-danger">*</span></label>
                    <textarea class="form-control" id="cancelReason" rows="3" placeholder="Please provide a reason for cancellation" required></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-2"></i>Close
                </button>
                <button type="button" class="btn btn-danger" onclick="confirmCancelBooking()">
                    <i class="fas fa-ban me-2"></i>Cancel Booking
                </button>
            </div>
        </div>
    </div>
</div>
}

@section Scripts {
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css' rel='stylesheet' />
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js'></script>
    
    <script>
        let bookingsTable;
        let calendar;
        let currentView = 'table';
        const bookingsData = @Html.Raw(Json.Serialize(Model));

        $(document).ready(function() {
            initializeDataTable();
            initializeFilters();
            initializeViewToggle();
            initializeCalendar();
        });

        function initializeDataTable() {
            bookingsTable = $('#bookingsTable').DataTable({
                responsive: false,
                scrollX: true,
                pageLength: 25,
                order: [[4, 'desc'], [5, 'desc']],
                language: {
                    search: "",
                    searchPlaceholder: "ðŸ” Search bookings...",
                    lengthMenu: "Show _MENU_",
                    info: "Showing _START_ to _END_ of _TOTAL_ bookings",
                    emptyTable: "No bookings found",
                    paginate: {
                        previous: "â€¹",
                        next: "â€º"
                    }
                }
            });
        }

        function initializeFilters() {
            $('#filterStatus, #filterDateRange, #filterRoom').on('change', applyFilters);
        }

        function initializeViewToggle() {
            $('.view-btn').on('click', function() {
                const view = $(this).data('view');
                switchView(view);
            });
        }

        function initializeCalendar() {
            const calendarEl = document.getElementById('calendar');
            const events = bookingsData.map(booking => ({
                id: booking.booking_id,
                title: `${booking.booking_title} (${booking.room_code})`,
                start: `${booking.booking_date.split('T')[0]}T${booking.booking_start_time}`,
                end: `${booking.booking_date.split('T')[0]}T${booking.booking_end_time}`,
                backgroundColor: getStatusColor(booking.booking_status),
                borderColor: getStatusColor(booking.booking_status),
                extendedProps: {
                    status: booking.booking_status,
                    room: booking.room_name,
                    user: booking.user_full_name,
                    description: booking.booking_description,
                    code: booking.booking_code
                }
            }));

            calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay'
                },
                events: events,
                eventClick: function(info) {
                    const event = info.event;
                    viewBooking(
                        event.id,
                        event.extendedProps.code,
                        event.title.split(' (')[0],
                        event.extendedProps.description,
                        event.start.toISOString().split('T')[0],
                        event.start.toTimeString().slice(0, 5),
                        event.end ? event.end.toTimeString().slice(0, 5) : '',
                        event.extendedProps.room,
                        event.extendedProps.user
                    );
                },
                height: 'auto',
                eventDisplay: 'block',
                displayEventTime: true,
                eventTimeFormat: {
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: false
                }
            });
        }

        function getStatusColor(status) {
            const colors = {
                'Pending': '#f59e0b',
                'Confirmed': '#10b981',
                'InProgress': '#3b82f6',
                'Completed': '#6366f1',
                'Cancelled': '#ef4444'
            };
            return colors[status] || '#6b7280';
        }

        function switchView(view) {
            currentView = view;
            $('.view-btn').removeClass('active');
            $(`.view-btn[data-view="${view}"]`).addClass('active');

            if (view === 'table') {
                $('#tableView').show();
                $('#calendarView').hide();
                $('.filter-section').show();
            } else {
                $('#tableView').hide();
                $('#calendarView').show();
                $('.filter-section').hide();
                if (calendar) calendar.render();
            }
        }

        function applyFilters() {
            const status = $('#filterStatus').val();
            const dateRange = $('#filterDateRange').val();
            const room = $('#filterRoom').val();
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            bookingsTable.rows().every(function() {
                const row = $(this.node());
                let show = true;

                if (status && row.data('status') !== status) show = false;
                if (room && row.data('room') !== room) show = false;
                
                if (dateRange) {
                    const bookingDate = new Date(row.data('date'));
                    bookingDate.setHours(0, 0, 0, 0);
                    
                    if (dateRange === 'today' && bookingDate.getTime() !== today.getTime()) show = false;
                    if (dateRange === 'tomorrow') {
                        const tomorrow = new Date(today);
                        tomorrow.setDate(tomorrow.getDate() + 1);
                        if (bookingDate.getTime() !== tomorrow.getTime()) show = false;
                    }
                    if (dateRange === 'week') {
                        const weekEnd = new Date(today);
                        weekEnd.setDate(weekEnd.getDate() + 7);
                        if (bookingDate < today || bookingDate > weekEnd) show = false;
                    }
                    if (dateRange === 'month') {
                        const monthEnd = new Date(today);
                        monthEnd.setMonth(monthEnd.getMonth() + 1);
                        if (bookingDate < today || bookingDate > monthEnd) show = false;
                    }
                }

                if (show) {
                    row.show();
                } else {
                    row.hide();
                }
            });
        }

        function resetFilters() {
            $('#filterStatus, #filterDateRange, #filterRoom').val('');
            bookingsTable.rows().every(function() {
                $(this.node()).show();
            });
        }
        
        function viewBooking(id, code, title, description, date, startTime, endTime, room, user) {
            $('#viewCode').text(code);
            $('#viewTitle').text(title);
            $('#viewRoom').text(room);
            $('#viewUser').text(user);
            $('#viewDate').text(new Date(date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }));
            $('#viewTime').text(startTime + ' - ' + endTime);
            $('#viewDescription').text(description || 'No description provided');
            
            const modal = new bootstrap.Modal(document.getElementById('viewBookingModal'));
            modal.show();
        }
        
        function approveBooking(bookingId) {
            Swal.fire({
                title: 'Approve Booking?',
                text: 'Are you sure you want to approve this booking?',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'Yes, approve it',
                confirmButtonColor: '#10b981',
                cancelButtonColor: '#6b7280'
            }).then((result) => {
                if (result.isConfirmed) {
                    $.ajax({
                        url: '@Url.Action("ApproveBooking", "Admin")',
                        type: 'POST',
                        data: { bookingId: bookingId },
                        success: function(response) {
                            if (response.success) {
                                Swal.fire({
                                    icon: 'success',
                                    title: 'Success!',
                                    text: response.message,
                                    confirmButtonColor: '#7aa22e'
                                }).then(() => location.reload());
                            } else {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Error',
                                    text: response.message,
                                    confirmButtonColor: '#7aa22e'
                                });
                            }
                        }
                    });
                }
            });
        }
        
        function cancelBooking(bookingId) {
            $('#cancelBookingId').val(bookingId);
            $('#cancelReason').val('');
            
            const modal = new bootstrap.Modal(document.getElementById('cancelBookingModal'));
            modal.show();
        }
        
        function confirmCancelBooking() {
            const bookingId = $('#cancelBookingId').val();
            const reason = $('#cancelReason').val().trim();
            
            if (!reason) {
                Swal.fire({
                    icon: 'error',
                    title: 'Missing Information',
                    text: 'Please provide a cancellation reason',
                    confirmButtonColor: '#7aa22e'
                });
                return;
            }
            
            $.ajax({
                url: '@Url.Action("CancelBooking", "Admin")',
                type: 'POST',
                data: { 
                    bookingId: bookingId,
                    reason: reason
                },
                success: function(response) {
                    if (response.success) {
                        bootstrap.Modal.getInstance(document.getElementById('cancelBookingModal')).hide();
                        Swal.fire({
                            icon: 'success',
                            title: 'Success!',
                            text: response.message,
                            confirmButtonColor: '#7aa22e'
                        }).then(() => location.reload());
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: response.message,
                            confirmButtonColor: '#7aa22e'
                        });
                    }
                }
            });
        }
    </script>
}

@section Styles {
    <style>
    /* From RoomsView */
    .page-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 2rem;
    }

    .page-actions {
        display: flex;
        gap: 0.75rem;
        align-items: center;
    }

    .stat-card-sm {
        background: var(--white);
        border-radius: var(--radius-md);
        padding: 1.25rem;
        display: flex;
        align-items: center;
        gap: 1rem;
        box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        border: 1px solid rgba(122,162,46,0.08);
        transition: all 0.2s;
    }

    .stat-card-sm:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .stat-icon-sm {
        width: 48px;
        height: 48px;
        min-width: 48px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
        color: var(--white);
    }

    .stat-icon-sm.bg-primary { background: linear-gradient(135deg, #7aa22e 0%, #5f7f23 100%); }
    .stat-icon-sm.bg-success { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
    .stat-icon-sm.bg-warning { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
    .stat-icon-sm.bg-info { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); }
    .stat-icon-sm.bg-danger { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }

    .stat-details-sm {
        flex: 1;
    }

    .stat-value-sm {
        font-size: 1.75rem;
        font-weight: 700;
        color: var(--gray-800);
        line-height: 1;
        font-family: 'Poppins', sans-serif;
    }

    .stat-label-sm {
        font-size: 0.8125rem;
        color: var(--gray-600);
        margin-top: 0.25rem;
        font-weight: 500;
    }

    .th-content {
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8125rem;
        white-space: nowrap;
    }

    .th-content i {
        opacity: 0.6;
        font-size: 0.875rem;
    }

    .view-toggle {
        display: flex;
        gap: 0.5rem;
        background: var(--gray-100);
        padding: 0.25rem;
        border-radius: 8px;
    }

    .view-btn {
        padding: 0.5rem 0.75rem;
        border: none;
        background: transparent;
        color: var(--gray-600);
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 1rem;
    }

    .view-btn:hover {
        color: var(--primary);
        background: rgba(122, 162, 46, 0.1);
    }

    .view-btn.active {
        background: var(--white);
        color: var(--primary);
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .status-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.375rem;
        padding: 0.375rem 0.75rem;
        border-radius: 6px;
        font-size: 0.75rem;
        font-weight: 600;
        white-space: nowrap;
    }

    .status-badge i {
        font-size: 0.5rem;
    }

    .btn-action {
        width: 32px;
        height: 32px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.875rem;
    }

    .modal-header-content {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .modal-icon {
        width: 48px;
        height: 48px;
        border-radius: 10px;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--white);
        font-size: 1.25rem;
    }

    .modal-subtitle {
        font-size: 0.8125rem;
        color: var(--gray-600);
        margin: 0.25rem 0 0 0;
    }

    .booking-title-cell {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    }

    .booking-title-cell .fw-semibold {
    color: var(--gray-800);
    font-weight: 600;
    }

    .room-info {
    line-height: 1.4;
    }

    .room-name {
    font-weight: 500;
    color: var(--gray-800);
    }

    .room-detail {
    font-size: 0.8125rem;
    color: var(--gray-600);
    }

    .user-info {
    line-height: 1.4;
    }

    .user-name {
    font-weight: 500;
    color: var(--gray-800);
    }

    .user-detail {
    font-size: 0.8125rem;
    color: var(--gray-600);
    }

    .time-range {
    font-weight: 500;
    color: var(--gray-700);
    }

    /* Status Badges for Bookings */
    .status-pending {
    background: rgba(245, 158, 11, 0.1);
    color: #d97706;
    border: 1px solid rgba(245, 158, 11, 0.2);
    }

    .status-confirmed {
    background: rgba(16, 185, 129, 0.1);
    color: #059669;
    border: 1px solid rgba(16, 185, 129, 0.2);
    }

    .status-progress {
    background: rgba(59, 130, 246, 0.1);
    color: #2563eb;
    border: 1px solid rgba(59, 130, 246, 0.2);
    }

    .status-completed {
    background: rgba(99, 102, 241, 0.1);
    color: #6366f1;
    border: 1px solid rgba(99, 102, 241, 0.2);
    }

    .status-cancelled {
    background: rgba(239, 68, 68, 0.1);
    color: #dc2626;
    border: 1px solid rgba(239, 68, 68, 0.2);
    }

    /* Filter Section Enhancements */
    .filter-section {
    background: var(--gray-50);
    padding: 1.5rem;
    border-radius: var(--radius-lg);
    border: 1px solid var(--gray-200);
    margin-bottom: 1.5rem;
    }

    .filter-group {
    gap: 1.5rem;
    }

    .filter-select {
    min-width: 200px !important;
    border-radius: 8px;
    padding: 0.5rem 0.75rem;
    border: 1px solid var(--gray-300);
    transition: all 0.2s ease;
    }

    .filter-select:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 0.2rem rgba(122, 162, 46, 0.15);
    }

    .filter-actions {
    gap: 0.75rem;
    }

    /* Calendar View Enhancements */
    #calendar {
    background: var(--white);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    }

    .fc {
    font-family: Poppins, sans-serif;
    }

    .fc-toolbar-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--gray-800);
    }

    .fc-button {
    border-radius: 8px !important;
    border: none !important;
    background: var(--white) !important;
    color: var(--gray-700) !important;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1) !important;
    transition: all 0.2s !important;
    }

    .fc-button:hover {
    background: var(--primary) !important;
    color: var(--white) !important;
    transform: translateY(-1px) !important;
    }

    .fc-button-active {
    background: var(--primary) !important;
    color: var(--white) !important;
    }

    .fc-event {
    border: none !important;
    border-radius: 6px !important;
    padding: 0.375rem 0.5rem !important;
    font-size: 0.8125rem !important;
    font-weight: 600 !important;
    }

    .fc-event-title {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    }

    .fc-event .fc-event-dot {
    display: none;
    }

    /* Action Buttons */
    .btn-action-view {
    background: rgba(59, 130, 246, 0.1);
    color: #2563eb;
    }

    .btn-action-view:hover {
    background: rgba(59, 130, 246, 0.2);
    transform: translateY(-2px);
    }

    .btn-action-approve {
    background: rgba(16, 185, 129, 0.1);
    color: #059669;
    }

    .btn-action-approve:hover {
    background: rgba(16, 185, 129, 0.2);
    transform: translateY(-2px);
    }

    .btn-action-cancel {
    background: rgba(239, 68, 68, 0.1);
    color: #dc2626;
    }

    .btn-action-cancel:hover {
    background: rgba(239, 68, 68, 0.2);
    transform: translateY(-2px);
    }

    /* Modal Enhancements for Bookings */
    .modal-icon.bg-info {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    }

    .modal-icon.bg-danger {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    }

    /* Responsive */
    @@media (max-width: 768px) {
    .filter-group {
        flex-direction: column;
        gap: 1rem;
        align-items: stretch;
    }
    
    .filter-select {
        min-width: 100% !important;
    }
    
    .action-buttons {
        gap: 0.25rem;
    }
}
}